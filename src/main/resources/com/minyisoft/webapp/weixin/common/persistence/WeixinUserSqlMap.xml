<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.fusung.webapp.weixin.common.persistence.WeixinUserDao">
  <select id="getWeixinUser" parameterType="String" resultType="com.fusung.webapp.weixin.common.dto.WeixinUserInfo">
    select
		fopenid as openid,
     	fnickname as nickname,
     	fsex as sex,
     	flanguage as language,
     	fcity as city,
     	fprovince as country,
     	fcountry as province,
     	fheadimgurl as headimgurl,
     	fsubscribetime as subscribeTime,
     	funionid as unionid
    from t_weixin_weixinuser
    where fopenid = #{id}
  </select>
  
  <insert id="insertWeixinUser" parameterType="com.fusung.webapp.weixin.common.dto.WeixinUserInfo">
    insert into t_weixin_weixinuser (fopenid,fnickname,fsex,flanguage,fcity,fprovince,fcountry,fheadimgurl,fsubscribetime,funionid) 
    values(#{openid},#{nickname},#{sex},#{language},#{city},#{province},#{country},#{headimgurl},#{subscribeTime},#{unionid})
  </insert>

  <update id="updateWeixinUser" parameterType="com.fusung.webapp.weixin.common.dto.WeixinUserInfo">
    update t_weixin_weixinuser set fnickname=#{nickname},fsex=#{sex},flanguage=#{language},fcity=#{city},fprovince=#{province},
    fcountry=#{country},fheadimgurl=#{headimgurl},fsubscribetime=#{subscribeTime},funionid=#{unionid} where fopenid=#{openid}
  </update>
</mapper>